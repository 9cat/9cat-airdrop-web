{"version":3,"sources":["App.tsx","const/index.ts","assets/airdrop-mini.png","assets/success-mini.png","reportWebVitals.ts","index.tsx"],"names":["aWSBAirDropContract","aWSBTokenContract","ethersProvider","signer","AWSB_TOKEN_ADDRESS","AWSB_AIRDROP_CONTRACT_ADDRESS","ethereum","window","ethers","providers","Web3Provider","getSigner","console","log","init","a","Contract","aWSBAirDropABI","EIP20","connect","formatAddress","address","substr","length","Loaing","style","transform","className","Claiming","options","animationData","ClaimingAnimation","loop","autoplay","View","useLottie","App","useState","setAddress","expiredTime","setExpiredTime","claimBalance","setClaimBalance","errorNetWork","setErrorNetWork","aWSBTokenBalance","setaWSBTokenBalance","isMetaMaskConnected","setIsMetaMaskConnected","claiming","setClaiming","claimSuccess","setClaimSuccess","connecting","setConnecting","noWallet","setNotWallet","useEffect","Promise","resolve","setTimeout","Boolean","selectedAddress","getNetwork","chainId","getNetWork","getAccount","on","accounts","getAirdropInfos","request","method","walletAccounts","balanceOf","claimExpiredAt","toNumber","claimWhitelist","BigNumber","toString","div","toFixed","connectWallet","claimButtonDisabled","Number","dayjs","isAfter","unix","claim","process","wait","src","success","airdrop","alt","fontWeight","marginLeft","background","String","format","onClick","disabled","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mx0bAyBIA,EACAC,EAGAC,EACAC,E,mJCzBSC,EAAqB,6CACrBC,EAAgC,6CCN9B,MAA0B,yCCA1B,MAA0B,yC,eHwBnCC,EAAWC,OAAOD,SAOpBA,IACFJ,EAAiB,IAAIM,IAAOC,UAAUC,aAAaJ,EAAU,OAC7DH,EAASD,EAAeS,aAE1BC,QAAQC,IAAI,0DAAiDX,GAE7D,IAAMY,EAAI,uCAAG,sBAAAC,EAAA,sDACXf,EAAsB,IAAIQ,IAAOQ,SAVAX,6CAY/BY,IACAf,GAIFD,GADAA,EAAoB,IAAIO,IAAOQ,SAjBRZ,6CAiBmCc,MACpBC,QAAQhB,GAC9CH,EAAsBA,EAAoBmB,QAAQhB,GATvC,2CAAH,qDAYJiB,EAAgB,SAACC,GACrB,OAAOA,EAAQC,OAAO,EAAG,GAAK,MAAQD,EAAQC,OAAOD,EAAQE,OAAS,EAAG,IAG3E,SAASC,IACP,OACE,qBAAKC,MAAO,CAAEC,UAAW,eAAzB,SACE,sBAAKC,UAAU,aAAf,UACE,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,6BAMR,SAASC,IACP,IAAMC,EAAU,CACdC,cAAeC,EACfC,MAAM,EACNC,UAAU,GAGJC,EAASC,oBAAUN,GAAnBK,KAER,OAAO,qBAAKP,UAAU,qBAAf,SAAqCO,IAsO/BE,MAnOf,WAAgB,IAAD,EACiBC,mBAAiB,IADlC,mBACNhB,EADM,KACGiB,EADH,OAEyBD,mBAAiB,GAF1C,mBAENE,EAFM,KAEOC,EAFP,OAG2BH,mBAAiB,KAH5C,mBAGNI,EAHM,KAGQC,EAHR,OAI2BL,oBAAkB,GAJ7C,mBAINM,EAJM,KAIQC,EAJR,OAKmCP,mBAAiB,KALpD,mBAKNQ,EALM,KAKYC,EALZ,OAMyCT,qBANzC,mBAMNU,EANM,KAMeC,EANf,OAOmBX,oBAAkB,GAPrC,mBAONY,EAPM,KAOIC,EAPJ,OAQ2Bb,oBAAkB,GAR7C,mBAQNc,EARM,KAQQC,EARR,OASuBf,oBAAkB,GATzC,mBASNgB,EATM,KASMC,GATN,QAUoBjB,oBAAkB,GAVtC,qBAUNkB,GAVM,MAUIC,GAVJ,MAYbC,qBAAU,WACR,IAAKnD,EAGH,OAFAkD,IAAa,QACbF,IAAc,GAHF,4CAgBd,sBAAAvC,EAAA,sEACQ,IAAI2C,SAAQ,SAACC,GAAD,OAAaC,WAAWD,EAAS,QADrD,OAEEX,EAAuBa,QAAQvD,EAASwD,kBACxCR,IAAc,GAHhB,4CAhBc,sBAOdA,IAAc,GACE,uCAAG,sBAAAvC,EAAA,sEACAb,EAAe6D,aADf,OCrGO,KDqGP,OAC6BC,UAE5CpB,GAAgB,GAChBN,EAAW,KAJI,2CAAH,oDAOhB2B,GAfc,mCAqBdC,KACC,IAUC5D,GACFA,EAAS6D,GAAG,mBATC,SAACC,GACdpB,EACEoB,EAAS7C,OAAS,GAAKsC,QAAQvD,EAASwD,kBAEpCM,EAAS7C,OAAS,GAAKsC,QAAQvD,EAASwD,kBAC5CxB,EAAW,OAOf,IAAM+B,GAAe,uCAAG,kCAAAtD,EAAA,sEAChBD,IADgB,WAElBiC,GAAwBJ,EAFN,iCAGOrC,EAASgE,QAAQ,CAC1CC,OAAQ,wBAJU,cAGhBC,EAHgB,OAMpBlC,EAAWkC,EAAe,IANN,SAO2BvE,EAAkBwE,UAC/DD,EAAe,IARG,cAOhB3B,EAPgB,iBAUsB7C,EAAoB0E,iBAV1C,eAUhBnC,EAVgB,OAWpB3B,QAAQC,IACN,0EACA0B,EAAYoC,YAbM,UAeuB3E,EAAoB4E,eAC7DJ,EAAe,IAhBG,QAehB/B,EAfgB,OAkBpBD,EAAeD,EAAYoC,YAC3B7B,EACE,IAAI+B,IAAUhC,EAAiBiC,YAC5BC,IAAI,MACJC,QAAQ,GACRF,YAELpC,EACE,IAAImC,IAAUpC,EAAaqC,YACxBC,IAAI,MACJC,QAAQ,GACRF,YA7Be,4CAAH,qDAkCrBrB,qBAAU,WAERY,OAEC,CAACtB,IAEJ,IAAMkC,GAAa,uCAAG,sBAAAlE,EAAA,sEACPT,EAASgE,QAAQ,CAC5BC,OAAQ,wBAFU,mFAAH,qDAMbW,GACJjC,GACAE,GACyB,IAAzBgC,OAAO1C,IACP2C,MAAQC,QAAQD,IAAME,KAAK/C,IAEvBgD,GAAK,uCAAG,4BAAAxE,EAAA,6DACZmC,GAAY,GADA,kBAGUlD,EAAoBuF,QAH9B,cAGNC,EAHM,yBAKFA,EAAQC,OALN,OAMRrC,GAAgB,GAChBiB,KAPQ,0DASVnB,GAAY,GATF,kDAWVA,GAAY,GAXF,iEAAH,qDAeX,OACE,sBAAKvB,UAAU,MAAf,UACE,sBAAKA,UAAU,UAAf,mBACSvB,EADT,YAEYC,KAEZ,sBAAKsB,UAAU,OAAf,UACGsB,EACC,cAACrB,EAAD,IAEA,qBACE8D,IAAKvC,EAAewC,EAAUC,EAC9BjE,UAAU,cACVkE,IAAI,QAGR,sBAAKlE,UAAU,UAAf,UACE,sBAAKA,UAAU,QAAf,UACE,sBAAMF,MAAO,CAAEqE,WAAY,KAA3B,kBACA,sBAAMrE,MAAO,CAAEqE,WAAY,IAAKC,WAAY,QAA5C,2BAGA,qBAAKpE,UAAU,UAAf,sBAEF,sBAAKA,UAAU,eAAf,UACE,sBAAKA,UAAU,mBAAf,UACE,qBACEA,UAAU,YACVF,MAAO,CACLuE,WAAY3E,EAAU,UAAY,aAGrCgC,GAAc,gBACdE,IAAY,oBACZlC,EACGD,EAAc6E,OAAO5E,IACrBsB,IAAiBU,EACjB,sCACAA,GAECE,GADD,GAEA,2BAGLlC,GACC,eAAC,WAAD,WACE,sBAAKM,UAAU,oBAAf,qBACW,IACT,uBAAMF,MAAO,CAAEqE,WAAY,IAAKC,WAAY,IAA5C,UACGlD,EADH,cAIF,sBAAKlB,UAAU,sBAAf,2BACiB,IACf,uBAAMF,MAAO,CAAEqE,WAAY,IAAKC,WAAY,IAA5C,UACGtD,EADH,cAIF,sBAAKd,UAAU,MAAf,iCAEE,sBAAMF,MAAO,CAAEqE,WAAY,IAAKC,WAAY,IAA5C,SACGX,IAAoB,IAAd7C,GAAoB2D,OAAO,yBAM3C7E,EACC,wBACEM,UAAU,eACVwE,QAASZ,GACTa,SAAUlB,GACVzD,MAAO,CACLuE,WAAY7C,EACR,UACA+B,GACA,UACA,WATR,SAYGjC,EAAW,cAACzB,EAAD,IAAa2B,EAAe,WAAa,UAErDR,GAAgBY,GAClB,wBACE5B,UAAU,eACVyE,UAAQ,EACR3E,MAAO,CACLuE,WAAY,WAJhB,SAOGzC,GACG,2BACA,kCAGN,wBACE5B,UAAU,eACVF,MAAO,CACLuE,WAAY,WAEdG,QAASlB,GACTmB,SAAU/C,EANZ,SAQGA,EAAa,gBAAkB,4BI9R/BgD,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAO1Bb,M","file":"static/js/main.6f6470e5.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport dayjs from \"dayjs\";\nimport { useLottie } from \"lottie-react\";\nimport BigNumber from \"bignumber.js\";\nimport ClaimingAnimation from \"./assets/ClaimingAnimation.json\";\nimport { aWSBAirDropABI } from \"./ABI/airdrop.json\";\nimport { EIP20 } from \"./ABI/eip-20.json\";\nimport {\n  BSC_TESTNET_ID,\n  AWSB_TOKEN_ADDRESS,\n  AWSB_AIRDROP_CONTRACT_ADDRESS,\n} from \"./const\";\nimport airdrop from \"./assets/airdrop-mini.png\";\nimport success from \"./assets/success-mini.png\";\nimport \"./App.less\";\nimport { Fragment } from \"react\";\n\ndeclare global {\n  interface Window {\n    ethereum: any;\n  }\n}\n\nconst ethereum = window.ethereum;\nlet aWSBAirDropContract: ethers.Contract;\nlet aWSBTokenContract: ethers.Contract;\nconst aWSBTokenAddress = AWSB_TOKEN_ADDRESS;\nconst aWSBAirDropContractAddress = AWSB_AIRDROP_CONTRACT_ADDRESS;\nlet ethersProvider: any;\nlet signer: any;\nif (ethereum) {\n  ethersProvider = new ethers.providers.Web3Provider(ethereum, \"any\");\n  signer = ethersProvider.getSigner();\n}\nconsole.log(\"🚀 ~ file: App.tsx ~ line 33 ~ ethersProvider\", ethersProvider);\n\nconst init = async () => {\n  aWSBAirDropContract = new ethers.Contract(\n    aWSBAirDropContractAddress,\n    aWSBAirDropABI,\n    ethersProvider\n  );\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  aWSBTokenContract = new ethers.Contract(aWSBTokenAddress, EIP20);\n  aWSBTokenContract = aWSBTokenContract.connect(signer);\n  aWSBAirDropContract = aWSBAirDropContract.connect(signer);\n};\n\nconst formatAddress = (address: string) => {\n  return address.substr(0, 8) + \"...\" + address.substr(address.length - 8, 8);\n};\n\nfunction Loaing() {\n  return (\n    <div style={{ transform: \"scale(0.45)\" }}>\n      <div className=\"lds-roller\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  );\n}\n\nfunction Claiming() {\n  const options = {\n    animationData: ClaimingAnimation,\n    loop: true,\n    autoplay: true,\n  };\n\n  const { View } = useLottie(options);\n\n  return <div className=\"claiming-animation\">{View}</div>;\n}\n\nfunction App() {\n  const [address, setAddress] = useState<string>(\"\");\n  const [expiredTime, setExpiredTime] = useState<number>(0);\n  const [claimBalance, setClaimBalance] = useState<string>(\"0\");\n  const [errorNetWork, setErrorNetWork] = useState<boolean>(false);\n  const [aWSBTokenBalance, setaWSBTokenBalance] = useState<string>(\"0\");\n  const [isMetaMaskConnected, setIsMetaMaskConnected] = useState<boolean>();\n  const [claiming, setClaiming] = useState<boolean>(false);\n  const [claimSuccess, setClaimSuccess] = useState<boolean>(false);\n  const [connecting, setConnecting] = useState<boolean>(true);\n  const [noWallet, setNotWallet] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (!ethereum) {\n      setNotWallet(true);\n      setConnecting(false);\n      return;\n    }\n    let chainId: number;\n    setConnecting(true);\n    const getNetWork = async () => {\n      chainId = (await ethersProvider.getNetwork()).chainId;\n      if (chainId !== BSC_TESTNET_ID) {\n        setErrorNetWork(true);\n        setAddress(\"\");\n      }\n    };\n    getNetWork();\n    async function getAccount() {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n      setIsMetaMaskConnected(Boolean(ethereum.selectedAddress));\n      setConnecting(false);\n    }\n    getAccount();\n  }, []);\n\n  const change = (accounts: any[]) => {\n    setIsMetaMaskConnected(\n      accounts.length > 0 && Boolean(ethereum.selectedAddress)\n    );\n    if (!(accounts.length > 0 && Boolean(ethereum.selectedAddress))) {\n      setAddress(\"\");\n    }\n  };\n  if (ethereum) {\n    ethereum.on(\"accountsChanged\", change);\n  }\n\n  const getAirdropInfos = async () => {\n    await init();\n    if (isMetaMaskConnected && !errorNetWork) {\n      let walletAccounts = await ethereum.request({\n        method: \"eth_requestAccounts\",\n      });\n      setAddress(walletAccounts[0]);\n      let aWSBTokenBalance: ethers.BigNumber = await aWSBTokenContract.balanceOf(\n        walletAccounts[0]\n      );\n      let expiredTime: ethers.BigNumber = await aWSBAirDropContract.claimExpiredAt();\n      console.log(\n        \"🚀 ~ file: App.tsx ~ line 142 ~ getAirdropInfos ~ expiredTime\",\n        expiredTime.toNumber()\n      );\n      let claimBalance: ethers.BigNumber = await aWSBAirDropContract.claimWhitelist(\n        walletAccounts[0]\n      );\n      setExpiredTime(expiredTime.toNumber());\n      setaWSBTokenBalance(\n        new BigNumber(aWSBTokenBalance.toString())\n          .div(1e18)\n          .toFixed(4)\n          .toString()\n      );\n      setClaimBalance(\n        new BigNumber(claimBalance.toString())\n          .div(1e18)\n          .toFixed(4)\n          .toString()\n      );\n    }\n  };\n\n  useEffect(() => {\n    // 获取合约相关信息\n    getAirdropInfos();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isMetaMaskConnected]);\n\n  const connectWallet = async () => {\n    return await ethereum.request({\n      method: \"eth_requestAccounts\",\n    });\n  };\n\n  const claimButtonDisabled =\n    claiming ||\n    claimSuccess ||\n    Number(claimBalance) === 0 ||\n    dayjs().isAfter(dayjs.unix(expiredTime));\n\n  const claim = async () => {\n    setClaiming(true);\n    try {\n      let process = await aWSBAirDropContract.claim();\n      try {\n        await process.wait();\n        setClaimSuccess(true);\n        getAirdropInfos();\n      } catch (error) {}\n      setClaiming(false);\n    } catch (error) {\n      setClaiming(false);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"address\">\n        Token:{AWSB_TOKEN_ADDRESS}\n        AirDrop: {AWSB_AIRDROP_CONTRACT_ADDRESS}\n      </div>\n      <div className=\"main\">\n        {claiming ? (\n          <Claiming />\n        ) : (\n          <img\n            src={claimSuccess ? success : airdrop}\n            className=\"airdrop-img\"\n            alt=\"img\"\n          />\n        )}\n        <div className=\"airdrop\">\n          <div className=\"title\">\n            <span style={{ fontWeight: 900 }}>aWSB</span>\n            <span style={{ fontWeight: 300, marginLeft: \"10px\" }}>\n              AirDrop Event\n            </span>\n            <div className=\"version\">0.0.6</div>\n          </div>\n          <div className=\"address-info\">\n            <div className=\"key address-text\">\n              <div\n                className=\"connected\"\n                style={{\n                  background: address ? \"#52c41a\" : \"#E1694E\",\n                }}\n              ></div>\n              {connecting && \"Connecting...\"}\n              {noWallet && \"Wallet not found!\"}\n              {address\n                ? formatAddress(String(address))\n                : errorNetWork && !connecting\n                ? \"BSC Only !   Please Switch NetWork.\"\n                : connecting\n                ? \"\"\n                : !noWallet\n                ? \"Please Unlock Wallet.\"\n                : \"\"}\n            </div>\n            {address && (\n              <Fragment>\n                <div className=\"key token-balance\">\n                  Balance:{\" \"}\n                  <span style={{ fontWeight: 600, marginLeft: 10 }}>\n                    {aWSBTokenBalance} aWSB\n                  </span>\n                </div>\n                <div className=\"key claimed-balance\">\n                  To be claimed:{\" \"}\n                  <span style={{ fontWeight: 600, marginLeft: 10 }}>\n                    {claimBalance} aWSB\n                  </span>\n                </div>\n                <div className=\"key\">\n                  Claims Expired Time:\n                  <span style={{ fontWeight: 600, marginLeft: 10 }}>\n                    {dayjs(expiredTime * 1000).format(\"YYYY-MM-DD\")}\n                  </span>\n                </div>\n              </Fragment>\n            )}\n          </div>\n          {address ? (\n            <button\n              className=\"claim-button\"\n              onClick={claim}\n              disabled={claimButtonDisabled}\n              style={{\n                background: claimSuccess\n                  ? \"#52c41a\"\n                  : claimButtonDisabled\n                  ? \"#858da1\"\n                  : \"#ec615b\",\n              }}\n            >\n              {claiming ? <Loaing /> : claimSuccess ? \"Success!\" : \"Claim\"}\n            </button>\n          ) : errorNetWork || noWallet ? (\n            <button\n              className=\"claim-button\"\n              disabled\n              style={{\n                background: \"#858da1\",\n              }}\n            >\n              {noWallet\n                ? \"Please Install MetaMask.\"\n                : \"Please Switch NetWork to BSC.\"}\n            </button>\n          ) : (\n            <button\n              className=\"claim-button\"\n              style={{\n                background: \"#4B2CC8\",\n              }}\n              onClick={connectWallet}\n              disabled={connecting}\n            >\n              {connecting ? \"Connecting...\" : \"Unlock Wallet\"}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","export const BSC_MAINNET_ID = 56\nexport const BSC_TESTNET_ID = 97\nexport const HECO_MAINNET_ID = 128\nexport const HECO_TESTNET_ID = 256\n\nexport const AWSB_TOKEN_ADDRESS = '0x436BA652D08356FCEf2d545e5f2Cfdb210B16f76'\nexport const AWSB_AIRDROP_CONTRACT_ADDRESS = '0xf7AC1d6c7285fFD364fb408E4c446656d99D5c6f'\n","export default __webpack_public_path__ + \"static/media/airdrop-mini.0a53d039.png\";","export default __webpack_public_path__ + \"static/media/success-mini.9ad65050.png\";","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// dummy line\nreportWebVitals();\n"],"sourceRoot":""}